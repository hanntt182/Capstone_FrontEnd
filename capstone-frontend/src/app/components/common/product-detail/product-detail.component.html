<div class="container" style="margin-top: 20px; margin-bottom: 20px" xmlns="http://www.w3.org/1999/html"
     xmlns="http://www.w3.org/1999/html">
  <div class="col-md-12">
    <div class="card" style="background: white">
      <div class="card-content justify-content-sm-center"
           style="padding-top: 20px; padding-bottom: 20px; padding-left: 20px; padding-right: 20px">
        <div class="row">
          <div class="col-sm-5 justify-content-center" style="border-right: 1px solid grey">
            <div class="row justify-content-center" style="padding: 10px">
              <img imageZoom="" lensBorder="1" src="{{mainImage}}"
                   style="width: 300px; height: 300px;"
                   onerror="if (this.src != '../../../../assets/img/image-default.jpg') this.src = '../../../../assets/img/image-default.jpg';">
            </div>
            <div class="row justify-content-center">
              <img src="{{post?.primaryImage}}"
                   (mouseover)="setImage($event)"
                   height="70" width="70" style="border: 1px solid #ddd;"
                   onerror="if (this.src != '../../../../assets/img/image-default.jpg') this.src = '../../../../assets/img/image-default.jpg';"/>
              <img *ngFor="let image of extraImages" src="{{image.extraImage}}"
                   (mouseover)="setImage($event)"
                   height="70" width="70" style="border: 1px solid #ddd;"
                   onerror="if (this.src != '../../../../assets/img/image-default.jpg') this.src = '../../../../assets/img/image-default.jpg';"/>

            </div>

          </div>
          <div class="col-sm-7">
            <div class="row" style="padding: 20px">
              <h4>{{post?.postTitle}}</h4>
            </div>
            <div class="row" style="padding-left: 20px">
              <h5>{{post?.product.productName}}</h5>
            </div>
            <div class="row" style="padding-left: 20px">
              <p class="text-secondary">{{post?.brand.brandName}} - {{post?.catalog.catalogName}}</p>
            </div>
            <div class="row" style="padding: 20px; font-size: 20px">
              <b>{{post?.minPrice}} - {{post?.maxPrice}}</b> / {{post?.unit}} | {{post?.minOrderQuantity}}
              {{post?.unit}}(Min. Order)
            </div>
            <div class="row" style="padding:20px; background-color: #f2f3f7">
              <div class="row col-sm-12">
                <label class="col-sm-3">Supply Ability:</label>
                <label class="col-sm-9">{{post?.supplierAbility}}</label>

                <label class="col-sm-3">Supplier Name:</label>
                <label class="col-sm-9">{{post?.supplier.username}}</label>
              </div>
              <div class="row col-sm-12 justify-content-center" style="padding: 30px">
                <button type="button" class="btn btn-info" (click)="createNego(post.postId)">Contact Supplier</button>
                <label class="col-sm-1"></label>
                <button type="button" class="btn btn-outline-info" (click)="createOrder(postId)"> Start Order</button>
              </div>
            </div>


          </div>
        </div>


      </div>
    </div>
  </div>
</div>


<div class="container" style="margin-top: 20px; margin-bottom: 20px">
  <div class="col-md-12">
    <div class="card" style="background: white">
      <div class="card-content justify-content-sm-center"
           style="padding-top: 20px; padding-bottom: 20px; padding-left: 20px; padding-right: 20px">

        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#productDetails" role="tab"
               aria-controls="home" aria-selected="true"><h5>Product Details</h5></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#companyProfile" role="tab"
               aria-controls="profile" aria-selected="false"><h5>Company Profile</h5></a>
          </li>
        </ul>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="productDetails" role="tabpanel" aria-labelledby="home-tab">
            <div class="row col-sm-12" style="padding: 20px; border-bottom: 1px dashed #8c8b8b">
              <h4>Overview</h4>
              <div class="row col-sm-12">
                <label class="col-sm-3">Product Name</label>
                <label class="col-sm-9">{{post?.product.productName}}</label>

                <label class="col-sm-3">Brand Name</label>
                <label class="col-sm-9">{{post?.brand.brandName}}</label>

                <label class="col-sm-3">Catagory</label>
                <label class="col-sm-9">{{post?.catalog.catalogName}}</label>

                <label class="col-sm-3">Color</label>
                <label class="col-sm-9">{{post?.color.colorName}}</label>

                <label class="col-sm-3">Warranty</label>
                <label class="col-sm-9">{{post?.warranty}}</label>
              </div>
            </div>
            <div class="row col-sm-12" style="padding: 20px; border-bottom: 1px dashed #8c8b8b">
              <h4>Shipping</h4>
              <div class="row col-sm-12">
                <label class="col-sm-3">Shipping Medthod</label>
              </div>
              <div class="row col-sm-12" *ngFor="let postShip of postShips">
                <div class="col-sm-2 text-right">{{postShip.postShipID.ship.shipName}} :</div>
                <div class="col-sm-9">{{postShip.shippingMinTime}} day(s) - {{postShip.shippingMaxTime}} day(s) :
                  {{postShip.shippingFee}} VND
                </div>
              </div>
            </div>
            <div class="row col-sm-12" style="padding: 20px; border-bottom: 1px dashed #8c8b8b">
              <h4>Product Description</h4>
              <div class="row col-sm-12">
                <table class="table table-responsive table-bordered">
                  <thead>
                  <tr>
                    <td scope="col">#</td>
                    <td scope="col">Description Name</td>
                    <td scope="col">Description Value</td>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let description of descriptions; let i = index">
                    <td scope="row">{{i + 1}}</td>
                    <td>{{description.postDescriptionID.description.descriptionName}}</td>
                    <td>{{description.descriptionValue}}</td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="companyProfile" role="tabpanel" aria-labelledby="profile-tab">
            <div class="row col-sm-12" style="padding: 20px;">
              <h4>Company Information</h4>
              <div class="row col-sm-12">
                <img src="{{post?.supplier.companyLogo}}" alt="Company Logo" class="img-thumbnail"
                     style="max-width: 200px; max-height: 200px">
              </div>
              <div class="row col-sm-12">
                <label class="col-sm-3">Company Name</label>
                <label class="col-sm-9">{{post?.supplier.companyName}}</label>

                <label class="col-sm-3">Address</label>
                <label class="col-sm-9">{{post?.supplier.companyAddress}}</label>

                <label class="col-sm-3">Phone</label>
                <label class="col-sm-9">{{post?.supplier.companyPhone}}</label>

                <label class="col-sm-3">Website</label>
                <label class="col-sm-9">{{post?.supplier.companyWebsite}}</label>

                <label class="col-sm-3">Established Year</label>
                <label class="col-sm-9">{{post?.supplier.establishedYear}}</label>

                <label class="col-sm-3">Email</label>
                <label class="col-sm-9">{{post?.supplier.companyEmail}}</label>

                <label class="col-sm-3">Fax</label>
                <label class="col-sm-9">{{post?.supplier.companyFax}}</label>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<div class="container" style="margin-top: 20px; margin-bottom: 20px">
  <div class="col-md-12">
    <h5 class="text-dark">CUSTOMER REVIEWS</h5>

  </div>
  <div class="col-md-12">
    <div class="card">
      <div class="row col-sm-12" style="margin: 0px">
        <div class="col-sm-3 justify-content-center text-center align-items-center"
             style="padding-top: 15px; border-right: 1px solid #f7f7f7">
          <div><h5>Average Rate</h5></div>
          <div><h2 class="text-danger">{{post?.rate}}/5</h2></div>
          <div>
            <rating [(ngModel)]="rateProduct" [readonly]="true"></rating>
          </div>
          <div><label class="text-muted">({{rateTotal}} Comments)</label></div>
        </div>
        <div class="col-sm-4 justify-content-center text-center align-items-center"
             style="padding-top: 15px; border-right: 1px solid #f7f7f7">
          <div class="row align-items-center">
            <div class="col-sm-2 text-right" style="font-size: 12px;padding: 0px;">
              <rating [(ngModel)]="star" [readonly]="true" [max]="1"></rating>
              5
            </div>
            <div class="col-sm-8">
              <div class="progress" style="height: 10px">
                <div class="progress-bar bg-success" role="progressbar" [style.width]="(post?.star5/rateTotal)*100+'%'"
                     aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
            <div class="col-sm-2" style="font-size: 12px;padding: 0px;">
              {{(post?.star5/rateTotal)*100}}%
            </div>
            <div class="col-sm-2 text-right" style="font-size: 12px;padding: 0px;">
              <rating [(ngModel)]="star" [readonly]="true" [max]="1"></rating>
              4
            </div>
            <div class="col-sm-8">
              <div class="progress" style="height: 10px">
                <div class="progress-bar bg-success" role="progressbar" [style.width]="(post?.star4/rateTotal)*100+'%'"
                     aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
            <div class="col-sm-2" style="font-size: 12px;padding: 0px;">
              {{(post?.star4/rateTotal)*100}}%
            </div>
            <div class="col-sm-2 text-right" style="font-size: 12px;padding: 0px;">
              <rating [(ngModel)]="star" [readonly]="true" [max]="1"></rating>
              3
            </div>
            <div class="col-sm-8">
              <div class="progress" style="height: 10px">
                <div class="progress-bar bg-success" role="progressbar" [style.width]="(post?.star3/rateTotal)*100+'%'"
                     aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
            <div class="col-sm-2" style="font-size: 12px;padding: 0px;">
              {{(post?.star3/rateTotal)*100}}%
            </div>
            <div class="col-sm-2 text-right" style="font-size: 12px;padding: 0px;">
              <rating [(ngModel)]="star" [readonly]="true" [max]="1"></rating>
              2
            </div>
            <div class="col-sm-8">
              <div class="progress" style="height: 10px">
                <div class="progress-bar bg-success" role="progressbar" [style.width]="(post?.star2/rateTotal)*100+'%'"
                     aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
            <div class="col-sm-2" style="font-size: 12px;padding: 0px;">
              {{(post?.star2/rateTotal)*100}}%
            </div>
            <div class="col-sm-2 text-right" style="font-size: 12px;padding: 0px;">
              <rating [(ngModel)]="star" [readonly]="true" [max]="1"></rating>
              1
            </div>
            <div class="col-sm-8">
              <div class="progress" style="height: 10px">
                <div class="progress-bar bg-success" role="progressbar" [style.width]="(post?.star1/rateTotal)*100+'%'"
                     aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
            <div class="col-sm-2" style="font-size: 12px;padding: 0px;">
              {{(post?.star2/rateTotal)*100}}%
            </div>
          </div>
        </div>
        <div class="row col-sm-5 justify-content-center text-center align-items-center" style="padding-top: 15px;">
          <div *ngIf="checkVote=='false'">
            <h6>Share product reviews</h6>
            <button type="button" id="reviewButton" class="btn btn-warning" data-toggle="collapse" data-target="#reviewCollapse">Write
              your reviews
            </button>
          </div>
          <div *ngIf="checkVote=='true'">
            <div class="text-danger" style="font-size: 18px; font-weight: 500;">You reviewed for this post!</div>
            <div>Your Reviews</div>
            <div style="font-size: 10px">
              <rating [(ngModel)]="rateProductofUser" [readonly]="true"></rating>
            </div>
            <div><label style="font-size: 18px; font-weight: 500; margin:0px">{{myReview?.reviewTitle}}</label></div>
            <div>
              <p style="font-size: 14px; color: #4f4f4f">{{myReview?.review}}</p>
            </div>
          </div>
        </div>
      </div>
      <div class="row col-sm-12 collapse" style="margin: 0px; padding: 15px; border-top: 1px solid #f7f7f7"
           id="reviewCollapse">
        <div class="row">
          <div class="row col-sm-6" style="border-right: 1px solid #f7f7f7; margin: 0px">
            <h5>SEND YOUR REVIEW</h5>
            <form #reviewPostForm="ngForm">
              <div class="row col-sm-12 align-items-center">
                <label>1. Đánh giá của bạn về sản phẩm này: </label>
                <rating [(ngModel)]="ratePost" [ngModelOptions]="{standalone: true}"></rating>
              </div>
              <div class="row col-sm-12 align-items-center">
                <label>2. Tiêu đề của nhận xét: </label><br>
                <input type="text" class="form-control" placeholder="Nhập tiêu đề nhận xét" name="reviewTitle" ngModel required>
              </div>
              <div class="row col-sm-12 align-items-center">
                <label>3. Viết nhận xét của bạn vào bên dưới: </label><br>
                <textarea maxlength="255" rows="3" class="form-control" placeholder="Nhận xét của bạn về sản phẩm này" name="review" ngModel required></textarea>
              </div>
              <div class="row col-sm-12 align-items-center justify-content-end"
                   style="padding: 5px; padding-right: 15px">
                <button [disabled]="reviewPostForm.invalid && ratePost==0" type="button" class="btn btn-warning"
                (click)="reviewPost(reviewPostForm.value)">
                  Send your reviews
                </button>
              </div>
            </form>
          </div>
          <div class="row col-sm-6 align-items-center">
            <div class="row col-sm-12">
              <div class="col-sm-5">
                <img src="{{mainImage}}"
                     style="width: 150px; height: 150px;"
                     onerror="if (this.src != '../../../../assets/img/image-default.jpg') this.src = '../../../../assets/img/image-default.jpg';">
              </div>
              <div class="row col-sm-7 align-items-center">
                <div style="font-size: 22px; font-weight: 300">{{post?.product.productName}}</div>
                <br>
                <div class="col-sm-12 text-secondary small">{{post?.brand.brandName}} - {{post?.catalog.catalogName}}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row col-sm-12" style="margin: 0px; padding: 15px; border-top: 1px solid #f7f7f7" *ngFor="let review of reviews; let i = index">
        <div class="row col-sm-3 justify-content-center text-center align-items-center">
          <div [style.background-image]="'url(' + review.reviewID.user.companyLogo + ')'"
            style="background-size: 60px 60px;border-radius:50%; width: 65px;height: 65px">

          </div>
          <div class="col-sm-12">{{review.reviewID.user.companyName}}</div>
          <div class="col-sm-12"><i>{{review.reviewedDay}}</i></div>
        </div>
        <div class="row col-sm-9">
          <div class="row col-sm-12 align-items-center">
            <div style="font-size: 10px">
              <rating [(ngModel)]="starReviews[i]" [readonly]="true"></rating>
            </div>
            <div style="padding-left:10px"><label style="font-size: 18px; font-weight: 500; margin:0px">{{review.reviewTitle}}</label></div>
          </div>
          <div class="row col-sm-12" style="margin: 0px;padding: 10px">
            <p style="font-size: 14px; color: #4f4f4f">{{review.review}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
